lua script allows atomic operation (like transations) 